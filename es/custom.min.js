function init(){num_steps=$("[data-step]").length,$(document).on("focus","textarea, input, select",function(){$("body").addClass("fixfixed")}).on("blur","textarea, input, select",function(){$("body").removeClass("fixfixed")}),$("[ng-model]").on("keyup",function(){var e=$(this);e.val().length>0?(e.removeClass("step__field__input_error"),$('[data-error="'+e.attr("ng-model")+'"]').html("").hide(),$('[data-valid="'+e.attr("ng-model")+'"]').fadeIn(200),$('[data-placeholder="'+e.attr("ng-model")+'"]').removeClass("step__field__placeholder_error")):$('[data-valid="'+e.attr("ng-model")+'"]').fadeOut(200)}),$("[ng-model]").on("focus",function(){var e=$(this);$('[data-placeholder="'+e.attr("ng-model")+'"]').addClass("step__field__placeholder_active")}),$("[ng-model]").on("blur",function(){var e=$(this);0===e.val().length&&$('[data-placeholder="'+e.attr("ng-model")+'"]').removeClass("step__field__placeholder_active")}),$('[data-girl=""]').each(function(){var e=$(this);e.css("background-image",'url("'+e.data("image")+'")'),e.find('[data-girl="name"]').html(e.data("name")),e.find('[data-girl="age"]').html(e.data("age")),e.find('[data-girl="distance"]').html(e.data("distance"))})}function animateStep(e,t){var a=$("[data-step="+e+"]");$new_step=$("[data-step="+t+"]"),did_show_results&&resetResults(),e!=t&&num_steps>=e?"zoom"==$new_step.data("effect")?(a.css("transform","scale(0)").fadeOut(200,function(){$new_step.fadeIn(200).css("transform","scale(1)")}),2==t&&timeouts.push(setTimeout(function(){angular.element('[ng-controller="utlCtl"]').scope().nextStep()},4e3))):"left"==$new_step.data("effect")?(a.css("transform","translateX(-100%)").fadeOut(400),$new_step.fadeIn(400).css("transform","translateX(0)")):"up"==$new_step.data("effect")?$new_step.fadeIn(400).css("transform","translateY(0)"):"turn"==$new_step.data("effect")&&($("[data-step="+(e-1)+"]").fadeOut(100),a.show().css("transform","rotate3d(0, 1, 0, -90deg)").fadeOut(250,function(){$new_step.fadeIn(250).css("transform","rotate3d(0, 1, 0, 0deg)")})):$new_step.fadeIn(400),$(window).scrollTop($("[data-form]").offset().top)}function showResults(e){e&&(did_show_results=!0,document.activeElement.blur(),$('button, input[type="submit"]').prop("disabled",!0),$("[data-step]").fadeOut(400,function(){did_show_results&&$("[data-results]").fadeIn(400,function(){timeouts.push(setTimeout(function(){$('[data-checks] [data-check="0"]').fadeOut(200,function(){$('[data-check="1"]').fadeIn(200)})},1250)),timeouts.push(setTimeout(function(){$('[data-checks] [data-check="1"]').fadeOut(200,function(){$('[data-check="2"]').fadeIn(200)})},2500)),timeouts.push(setTimeout(function(){$('[data-checks] [data-check="2"]').fadeOut(200,function(){$('[data-check="3"]').fadeIn(200),$("[data-spinner]").fadeOut(400),$("[data-finish]").fadeIn(400)})},3750))})}))}function resetResults(){did_show_results=!1,num_steps;for(var e=0;e<timeouts.length;e++)clearTimeout(timeouts[e]);timeouts=[],$("[data-results]").stop(!0,!1).hide(),$("[data-check]").stop(!0,!1).hide(),$("[data-finish]").stop(!0,!1).hide(),$("[data-spinner]").stop(!0,!1).show()}function handleErrors(e){$("[data-error]").html("").hide(),$("[ng-model]").removeClass("step__field__input_error"),angular.forEach(e,function(e){switch(e.field){case"age":case"email":case"password":$('[data-error="'+e.field+'"]').html(e.error).show(),$('[data-valid="'+e.field+'"]').fadeOut(200),$('[data-placeholder="'+e.field+'"]').addClass("step__field__placeholder_error"),$('[ng-model="'+e.field+'"]').addClass("step__field__input_error")}}),$('button, input[type="submit"]').removeAttr("disabled")}function handleSuccess(e){var t=$("input[ng-model=email]").val(),a=!1;t.indexOf("@teamcmp.com")>-1&&(a=!0),$.post("/common/dg_counter.php",{dg_tracker:"wh.registration.tour.redirection",email:t,test_user:a,need_user_interaction:!1}),$("[data-upgrade]").attr("href",e.wh_login+e.redirect).fadeIn(400)}var timeouts=[],did_show_results=!1,num_steps;$(document).ready(function(){init()});